/* Pretendard 폰트 임포트 (CDN) */
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');

/* Montserrat 폰트 임포트 */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ═══════════════════════════════════════════════════
       브랜드 색상 시스템 — 라이트 테마 (고정)
       ═══════════════════════════════════════════════════ */
    color-scheme: light;
    
    /* 배경 — 무채색 회색 계열 */
    --background: 247 247 247;           /* #F7F7F7 (깔끔한 연한 회색) */
    --background-elevated: 255 255 255;  /* #FFFFFF */
    --background-muted: 240 240 240;     /* #F0F0F0 (약간 진한 회색) */
    --background-accent: 232 232 232;    /* #E8E8E8 (중간 회색) */
    
    /* 텍스트 */
    --foreground: 26 23 20;              /* #1A1714 */
    --muted-foreground: 107 99 88;       /* #6B6358 */
    
    /* Primary */
    --primary: 26 23 20;                 /* #1A1714 */
    --primary-foreground: 250 248 245;   /* #FAF8F5 */
    
    /* Secondary */
    --secondary: 232 220 200;            /* #E8DCC8 */
    --secondary-foreground: 26 23 20;    /* #1A1714 */
    
    /* Accent */
    --accent: 237 232 223;               /* #EDE8DF */
    --accent-foreground: 26 23 20;       /* #1A1714 */
    
    /* Muted */
    --muted: 245 242 237;                /* #F5F2ED */
    
    /* 테두리 */
    --border: rgba(196, 184, 150, 0.3);
    --border-emphasis: rgba(196, 184, 150, 0.5);
    
    /* 카드 */
    --card: 255 255 255;                 /* #FFFFFF */
    --card-foreground: 26 23 20;         /* #1A1714 */
    
    /* Ring (포커스) */
    --ring: 196 184 150;                 /* #C4B896 */
    
    /* 그림자 */
    --shadow-sm: 0 1px 2px rgba(26, 23, 20, 0.04), 0 1px 3px rgba(26, 23, 20, 0.06);
    --shadow-md: 0 4px 8px rgba(26, 23, 20, 0.06), 0 2px 4px rgba(26, 23, 20, 0.04);
    --shadow-lg: 0 12px 24px rgba(26, 23, 20, 0.08), 0 4px 8px rgba(26, 23, 20, 0.04);
    --shadow-hover: 0 8px 20px rgba(26, 23, 20, 0.1);
    
    /* Destructive */
    --destructive: 220 38 38;            /* #DC2626 */
    --destructive-foreground: 255 255 255;
    
    /* 상태 색상 */
    --status-success: 22 163 74;         /* #16A34A */
    --status-warning: 202 138 4;         /* #CA8A04 */
    --status-error: 220 38 38;           /* #DC2626 */
    --status-info: 37 99 235;            /* #2563EB */
    
    /* 반경 */
    --radius: 0.5rem;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    background-color: #F7F7F7;
    color: #1A1714;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    color: #1A1714;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .perspective-1000 {
    perspective: 1000px;
  }
}

/* ═══════════════════════════════════════════════════
   브랜드 유틸리티 클래스
   ═══════════════════════════════════════════════════ */

/* 카드 호버 효과 */
.card-hover {
  transition: all 0.2s ease-out;
}
.card-hover:hover {
  box-shadow: var(--shadow-hover);
  border-color: rgba(196, 184, 150, 0.5);
  transform: translateY(-2px);
}

/* 카드 lift 효과 */
.card-lift {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.card-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px -15px rgba(26, 23, 20, 0.15);
}

/* 버튼 프레스 효과 */
.btn-press:active {
  transform: scale(0.97);
  transition: transform 0.1s;
}

/* 세련된 포커스 링 */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(232, 220, 200, 0.5);
}

/* 스켈레톤 시머 (라이트 테마) */
.skeleton-shimmer {
  background: linear-gradient(90deg, #F5F2ED 25%, #EDE8DF 50%, #F5F2ED 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 검색 하이라이트 */
.highlight-mark {
  background: rgba(232, 220, 200, 0.6);
  color: #1A1714;
  border-radius: 0.25rem;
  padding: 0 0.125rem;
}

/* Premium 카드 — Gradient Border */
.card-premium {
  background: #FFFFFF;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  box-shadow: var(--shadow-md);
}
.card-premium::before {
  content: '';
  position: absolute;
  inset: 0;
  padding: 1px;
  border-radius: 12px;
  background: linear-gradient(
    135deg,
    rgba(196, 184, 150, 0.6) 0%,
    rgba(196, 184, 150, 0.2) 50%,
    transparent 100%
  );
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask-composite: xor;
  pointer-events: none;
}

/* Inner Cream Gradient */
.card-cream-gradient {
  background: 
    linear-gradient(
      135deg,
      rgba(232, 220, 200, 0.3) 0%,
      transparent 60%
    ),
    #FFFFFF;
}

/* Top Accent Line */
.card-accent-top {
  position: relative;
  background: #FFFFFF;
  border-radius: 12px;
  overflow: hidden;
}
.card-accent-top::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #C4B896 0%, #E8DCC8 100%);
}

/* 상태 뱃지 — 라이트 테마 */
.badge-pending {
  background: #FEF3C7;
  color: #92400E;
  border: 1px solid #FCD34D;
}

.badge-preparing {
  background: #DBEAFE;
  color: #1E40AF;
  border: 1px solid #93C5FD;
}

.badge-completed {
  background: #DCFCE7;
  color: #166534;
  border: 1px solid #86EFAC;
}

/* 실시간 하이라이트 점멸 애니메이션 */
@keyframes blink {
  0%, 100% {
    border-color: transparent;
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
  }
  50% {
    border-color: rgb(239, 68, 68);
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
  }
}

/* react-big-calendar 커스터마이징 */
.rbc-calendar {
  @apply bg-background text-foreground;
}

.rbc-header {
  @apply border-b border-border py-2 text-sm font-semibold text-foreground;
}

.rbc-day-bg {
  @apply border-r border-b border-border;
}

.rbc-today {
  background-color: rgba(44, 62, 80, 0.3);
}

.rbc-off-range-bg {
  background-color: rgba(0, 0, 0, 0.05);
}

.rbc-off-range {
  color: rgba(34, 30, 29, 0.5);
}

.rbc-event {
  @apply rounded-md px-2 py-1 text-xs font-semibold cursor-pointer transition-opacity hover:opacity-80;
  margin-bottom: 2px !important;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.rbc-event-content {
  @apply truncate;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 하이브리드 방식: 예약이 많을 때 스타일 개선 */
.rbc-day-slot .rbc-events-container {
  margin-right: 0;
}

.rbc-day-slot .rbc-event {
  margin-bottom: 2px;
  min-height: 20px;
}

/* 그룹 카운트 스타일 */
.rbc-event.rbc-event-grouped {
  font-weight: 700;
  text-align: center;
  padding: 2px 6px;
}

/* Phase 1: 모바일 최적화 - 캘린더 셀 크기 확대 및 텍스트 잘림 방지 */
@media (max-width: 768px) {
  /* 캘린더 컨테이너 전체 최적화 */
  .rbc-calendar {
    font-size: 12px !important;
  }
  
  /* 날짜 셀 크기 대폭 확대 (텍스트 잘림 방지) */
  .rbc-day-bg {
    min-height: 200px !important; /* 높이 더 확대 (160px → 200px) */
    position: relative;
  }
  
  /* 날짜 숫자 크기 조정 */
  .rbc-date-cell {
    font-size: 16px !important;
    font-weight: 700;
    padding: 5px 3px !important;
    line-height: 1.2 !important;
  }
  
  /* 이벤트 텍스트 한 줄 제한 (가로 기준 1줄 이내) */
  .rbc-event {
    height: 32px !important; /* 고정 높이 (한 줄에 맞춤) */
    min-height: 32px !important;
    max-height: 32px !important;
    font-size: 11px !important;
    padding: 4px 6px !important; /* 패딩 조정 */
    margin-bottom: 4px !important;
    line-height: 1.2 !important; /* 줄 간격 줄임 */
    border-radius: 4px !important;
    overflow: hidden !important;
    white-space: nowrap !important; /* 줄바꿈 방지 - 한 줄로 제한 */
    text-overflow: ellipsis !important; /* 긴 텍스트 말줄임표 처리 */
    word-break: keep-all !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  
  /* 그룹 카운트 스타일 최적화 (미배정/체크인/체크아웃) - 한 줄 제한 */
  .rbc-event.rbc-event-grouped {
    font-size: 11px !important; /* 폰트 크기 조정 */
    font-weight: 700;
    height: 34px !important; /* 고정 높이 (한 줄에 맞춤) */
    min-height: 34px !important;
    max-height: 34px !important;
    padding: 5px 7px !important; /* 패딩 조정 */
    letter-spacing: 0.1px;
    white-space: nowrap !important; /* 줄바꿈 방지 - 한 줄로 제한 */
    text-overflow: ellipsis !important; /* 긴 텍스트 말줄임표 처리 */
    word-break: keep-all !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    line-height: 1.2 !important; /* 줄 간격 줄임 */
  }
  
  /* 날짜 셀 전체를 클릭 가능 영역으로 확대 */
  .rbc-day-slot {
    min-height: 200px !important; /* 높이 확대 (160px → 200px) */
  }
  
  /* 월간 뷰 전체 높이 조정 */
  .rbc-month-view {
    min-height: 600px !important; /* 최소 높이 보장 */
  }
  
  /* 월간 뷰 테이블 행 높이 조정 */
  .rbc-month-row {
    min-height: 200px !important; /* 각 행의 최소 높이 */
  }
  
  /* 요일 헤더 크기 조정 */
  .rbc-header {
    font-size: 11px !important;
    font-weight: 700;
    padding: 8px 2px !important;
    text-align: center;
  }
  
  /* 툴바 간소화 및 크기 조정 */
  .rbc-toolbar {
    padding: 6px 3px !important;
    margin-bottom: 6px !important;
    font-size: 12px !important;
  }
  
  .rbc-toolbar button {
    min-height: 38px !important;
    min-width: 38px !important;
    font-size: 12px !important;
    padding: 6px 10px !important;
  }
  
  .rbc-toolbar-label {
    font-size: 15px !important;
    font-weight: 700;
  }
  
  /* 월간 뷰에서 이벤트가 여러 개일 때 간격 조정 */
  .rbc-month-view .rbc-day-slot .rbc-events-container {
    margin-right: 0;
    max-height: calc(100% - 35px) !important; /* 날짜 숫자 공간 확보 */
  }
  
  .rbc-month-view .rbc-day-slot .rbc-event {
    margin-bottom: 4px !important; /* 간격 증가 */
  }
  
  /* 월간 뷰 테이블 셀 패딩 조정 */
  .rbc-month-view .rbc-day-bg {
    padding: 3px !important;
  }
  
  /* 이벤트 컨테이너 최적화 - 스크롤 가능하도록 */
  .rbc-events-container {
    margin-right: 0 !important;
    overflow-y: auto !important;
    max-height: 165px !important; /* 셀 높이에 맞춤 (130px → 165px) */
  }
  
  /* 이벤트 내용 한 줄 제한 */
  .rbc-event-content {
    overflow: hidden !important;
    white-space: nowrap !important; /* 한 줄로 제한 */
    text-overflow: ellipsis !important; /* 긴 텍스트 말줄임표 처리 */
    word-break: keep-all !important;
    line-height: 1.2 !important;
    width: 100% !important;
  }
  
  /* 오늘 날짜 표시 최적화 */
  .rbc-today {
    background-color: rgba(59, 130, 246, 0.1) !important;
  }
  
  /* 월간 뷰 테이블 행 높이 확보 */
  .rbc-month-row {
    min-height: 200px !important; /* 높이 확대 (160px → 200px) */
  }
  
  .rbc-month-view {
    height: auto !important;
    min-height: 600px !important; /* 최소 높이 보장 */
  }
  
  /* 캘린더 컨테이너 스크롤 가능하도록 */
  .rbc-calendar {
    overflow-y: visible !important;
  }
}

/* Phase 1: 색상 강화 - 미배정/체크인/체크아웃 색상 더 진하게 */
.rbc-event[data-status="unassigned"] {
  background-color: #4B5563 !important; /* 더 진한 회색 */
  color: white !important;
  font-weight: 700;
}

.rbc-event[data-status="checkin"] {
  background-color: #047857 !important; /* 더 진한 초록 */
  color: white !important;
  font-weight: 700;
}

.rbc-event[data-status="checkout"] {
  background-color: #1D4ED8 !important; /* 더 진한 파랑 */
  color: white !important;
  font-weight: 700;
}

.rbc-toolbar {
  @apply mb-4 flex items-center justify-between flex-wrap gap-2;
}

.rbc-toolbar button {
  @apply rounded-md border bg-background px-3 py-1.5 text-sm font-medium transition-colors;
  border-color: #221E1D;
}

.rbc-toolbar button:hover {
  background-color: rgba(44, 62, 80, 0.1);
  color: #2C3E50;
}

.rbc-toolbar button.rbc-active {
  @apply bg-primary text-primary-foreground border-primary;
}

.rbc-toolbar-label {
  @apply text-lg font-semibold text-foreground;
}

.rbc-time-slot {
  @apply border-t border-border;
}

.rbc-time-header-content {
  @apply border-l border-border;
}

.rbc-day-slot .rbc-time-slot {
  @apply border-t;
  border-color: rgba(0, 0, 0, 0.1);
}

.rbc-agenda-view table {
  @apply w-full border-collapse;
}

.rbc-agenda-view table thead > tr > th {
  @apply border-b border-border p-2 text-left text-sm font-semibold;
}

.rbc-agenda-view table tbody > tr > td {
  @apply border-b p-2;
  border-color: rgba(0, 0, 0, 0.1);
}

.rbc-agenda-view table tbody > tr:hover {
  background-color: rgba(44, 62, 80, 0.5);
}

.rbc-popup {
  @apply bg-card border border-border rounded-lg shadow-lg p-4 z-50;
}

.rbc-popup-header {
  @apply mb-2 text-sm font-semibold text-foreground;
}

.rbc-popup-content {
  @apply text-sm;
  color: rgba(34, 30, 29, 0.6);
}

/* Phase 1: 모든 버튼 터치 타겟 44x44px 이상 */
button, .clickable {
  min-height: 44px;
  min-width: 44px;
}

/* 카드/리스트 공통 클릭 힌트 */
.click-hint {
  @apply transition-all duration-200 hover:shadow-soft-md hover:border-brand-cream-dark/50 active:scale-[0.99] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-cream-dark/50 focus-visible:ring-offset-2;
}

/* 터치 피드백 */
button:active {
  transform: scale(0.95);
  opacity: 0.8;
  transition: transform 0.1s, opacity 0.1s;
}

/* 모바일 입력 필드 터치 타겟 확대 */
@media (max-width: 768px) {
  input[type="text"],
  input[type="date"],
  input[type="email"],
  input[type="tel"],
  select {
    min-height: 44px;
    font-size: 16px; /* iOS 줌 방지 */
  }
}

/* Phase 2: 하단 네비게이션 안전 영역 고려 */
.bottom-nav {
  padding-bottom: env(safe-area-inset-bottom);
}

/* Phase 2: 모바일 헤더 간소화 */
@media (max-width: 768px) {
  header {
    height: 56px; /* h-14 */
  }
}
