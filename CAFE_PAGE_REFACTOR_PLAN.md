# 카페 페이지 리팩토링 계획

## 현재 문제점 진단

### 1. 쿠폰 미노출 문제 (Critical)
```
현상: 쿠폰 영역이 빈 점선 박스로만 표시됨
원인 추정:
- perspective-1000 CSS 클래스가 Tailwind에 정의되지 않음
- guestInfo.room 값이 초기화되지 않았을 수 있음
- 3D transform이 제대로 동작하지 않음
```

### 2. 메뉴 이미지 미표시
```
현상: 메뉴 카드에 이미지 대신 텍스트만 표시
원인: 이미지 경로가 존재하지 않아 onError 핸들러 실행
```

### 3. 브랜딩 요소 부족
```
- 페이지 전체가 일반적인 정보 나열 형태
- 카페만의 특색이나 분위기 전달 부족
- 쿠폰 섹션이 매력적이지 않음
```

---

## 리팩토링 목표

1. **쿠폰 정상 노출** - 기술적 문제 해결
2. **브랜딩 강화** - 카페 고유의 따뜻하고 아늑한 분위기
3. **정보 계층 개선** - 핵심 정보 우선 노출
4. **일관된 디자인** - BBQ 페이지와 톤 통일

---

## 페이지 구조 재설계

### AS-IS (현재)
```
┌─────────────────────────────────┐
│ 카페 이용                        │ ← 단조로운 헤더
│ 투숙객 전용 할인 쿠폰과...        │
├─────────────────────────────────┤
│ ┌─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┐   │ ← 쿠폰 미노출
│ │                           │   │
│ │      (빈 점선 박스)        │   │
│ │                           │   │
│ └─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┘   │
├─────────────────────────────────┤
│ ⓘ 카페 이용 안내                │ ← 정보 카드
├─────────────────────────────────┤
│ • 메뉴                          │
│ ┌──────┐ ┌──────┐              │ ← 이미지 없는 카드
│ │텍스트 │ │텍스트 │              │
│ └──────┘ └──────┘              │
└─────────────────────────────────┘
```

### TO-BE (개선)
```
┌─────────────────────────────────┐
│ ┌─────────────────────────────┐ │
│ │    ☕ 카페 히어로 섹션       │ │ ← 실제 카페 사진 + 브랜딩
│ │    "OUSCARAVAN CAFÉ"        │ │
│ │    "여유로운 한 잔의 시간"   │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ ┌─────────────────────────────┐ │
│ │  🎫 숙박객 전용 10% 할인     │ │ ← 개선된 쿠폰 (심플)
│ │  ┌─────────┬───────────┐   │ │
│ │  │   10%   │ 숙박객 할인 │   │ │
│ │  │   OFF   │ 탭하여 사용 │   │ │
│ │  └─────────┴───────────┘   │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│  시그니처 메뉴                   │ ← 추천 메뉴 하이라이트
│ ┌──────────────────────────┐    │
│ │ [오우스 라떼 이미지]       │    │
│ │ 오우스 라떼     ₩5,500    │    │
│ │ "시그니처 라떼"           │    │
│ └──────────────────────────┘    │
├─────────────────────────────────┤
│  전체 메뉴                       │
│ ┌────┐ ┌────┐ ┌────┐           │ ← 카테고리 필터
│ │전체│ │커피│ │음료│           │
│ └────┘ └────┘ └────┘           │
│                                 │
│ [메뉴 그리드]                    │
├─────────────────────────────────┤
│  카페 안내                       │ ← 접이식 정보
│ ▸ 운영시간 / 위치 / 연락처       │
└─────────────────────────────────┘
```

---

## 컴포넌트 상세 설계

### 1. CafeHero - 카페 히어로 섹션 (신규)

```tsx
// components/guest/cafe/CafeHero.tsx

/**
 * 목적: 카페의 분위기와 브랜드 감성 전달
 * 핵심: 따뜻하고 아늑한 카페 이미지 + 심플한 카피
 */

┌─────────────────────────────────────────┐
│                                         │
│    [카페 내부/외부 실제 사진]            │
│                                         │
│    ─────────────────────────            │
│                                         │
│    OUSCARAVAN CAFÉ                      │ ← 영문 브랜드명 (작은 크기)
│    여유로운 한 잔의 시간                 │ ← 메인 카피 (큰 크기)
│                                         │
└─────────────────────────────────────────┘

스타일:
- 비율: aspect-[16/9] 또는 aspect-[2/1]
- 오버레이: 하단 그라데이션 (from-black/60)
- 이미지 위치: object-[center_40%] (카페 내부가 잘 보이도록)
- 폰트: 카피는 font-light로 우아하게
```

### 2. SimpleCoupon - 간소화된 쿠폰 (리팩토링)

```tsx
// components/guest/cafe/SimpleCoupon.tsx

/**
 * 문제: 기존 CouponFlip의 3D 플립이 제대로 동작하지 않음
 * 해결: 플립 효과 제거, 심플하고 확실한 쿠폰 UI로 변경
 */

┌─────────────────────────────────────────┐
│ ┌───────────┬─────────────────────────┐ │
│ │           │                         │ │
│ │   10%     │  숙박객 전용 할인        │ │
│ │   OFF     │                         │ │
│ │           │  객실: 101호             │ │
│ │  ───────  │  직원에게 보여주세요     │ │
│ │  (악센트) │                         │ │
│ │           │                         │ │
│ └───────────┴─────────────────────────┘ │
└─────────────────────────────────────────┘

스타일:
- 배경: 따뜻한 크림 계열 (bg-[#FBF9F4])
- 좌측: 할인율 강조 (큰 폰트, 브랜드 컬러)
- 우측: 정보 표시
- 테두리: 얇은 점선 (쿠폰 느낌)
- 좌우 펀치홀 유지 (시각적 쿠폰 형태)
```

### 3. SignatureMenu - 시그니처 메뉴 하이라이트 (신규)

```tsx
// components/guest/cafe/SignatureMenu.tsx

/**
 * 목적: 대표 메뉴 1-2개를 크게 부각
 * 핵심: "오우스 라떼"를 메인으로 강조
 */

┌─────────────────────────────────────────┐
│  Signature                              │ ← 섹션 라벨
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │      [오우스 라떼 큰 이미지]         │ │
│ │                                     │ │
│ │  ──────────────────────────────     │ │
│ │                                     │ │
│ │  오우스 라떼                        │ │ ← 메뉴명
│ │  섞지 않고 마실 때 첫 맛은 고소하고  │ │ ← 설명
│ │  끝 맛은 곡물의 단맛이...           │ │
│ │                                     │ │
│ │                        ₩5,500       │ │ ← 가격
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘

스타일:
- 카드: 라운드 큰 코너 (rounded-2xl)
- 이미지: aspect-[4/3], 라운드 상단
- 배경: 미색/크림 계열
```

### 4. MenuGrid - 메뉴 그리드 (리팩토링)

```tsx
// components/guest/cafe/MenuGrid.tsx

/**
 * 기존 MenuCarousel 대체
 * 변경: Swiper → 심플한 그리드
 * 이유: 이미지 없이도 깔끔하게 보이도록
 */

┌──────────────────────────────────────────┐
│  전체 메뉴                                │
│                                          │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐            │ ← 카테고리 필터
│  │전체│ │커피│ │음료│ │디저트│            │
│  └────┘ └────┘ └────┘ └────┘            │
│                                          │
│  ┌─────────────┐ ┌─────────────┐        │
│  │ 아메리카노   │ │ 카페라떼    │        │ ← 2열 그리드
│  │ ₩4,500      │ │ ₩5,000     │        │
│  └─────────────┘ └─────────────┘        │
│                                          │
│  ┌─────────────┐ ┌─────────────┐        │
│  │ 바닐라라떼   │ │ 캐모마일    │        │
│  │ ₩5,500      │ │ ₩4,500     │        │
│  └─────────────┘ └─────────────┘        │
└──────────────────────────────────────────┘

스타일:
- 카테고리 필터: pill 버튼 형태
- 메뉴 카드: 미니멀 (이름 + 가격 + 짧은 설명)
- 이미지 없이도 깔끔하게
- 가격 강조 (브랜드 컬러)
```

### 5. CafeInfo - 카페 정보 (간소화)

```tsx
// components/guest/cafe/CafeInfo.tsx

/**
 * 기존 CafeInfoTab의 정보 카드들을 Accordion으로 정리
 * 목적: 화면 공간 효율화
 */

┌─────────────────────────────────────────┐
│  카페 안내                               │
│                                         │
│  ▸ 운영시간                             │ ← 접힌 상태
│  ─────────────────────────────────      │
│  ▾ 위치 안내                            │ ← 펼친 상태
│     인천 강화군 화도면 해안남로 1066      │
│     (매장 방문 및 길 안내용)              │
│  ─────────────────────────────────      │
│  ▸ 연락처                               │
│  ─────────────────────────────────      │
│  ▸ 사업자 정보                          │
└─────────────────────────────────────────┘
```

---

## 색상 및 톤 가이드

### 카페 페이지 전용 팔레트

```css
/* 따뜻하고 아늑한 카페 분위기 */

--cafe-cream: #FBF9F4;      /* 배경 */
--cafe-warm: #F5E6D3;       /* 포인트 배경 */
--cafe-brown: #8B7355;      /* 악센트 */
--cafe-dark: #4A3F35;       /* 텍스트 */
--cafe-gold: #C4A77D;       /* 하이라이트 */
```

### 적용 예시

| 요소 | 색상 | 용도 |
|------|------|------|
| 히어로 오버레이 | cafe-dark/60 | 텍스트 가독성 |
| 쿠폰 배경 | cafe-cream | 부드러운 느낌 |
| 쿠폰 악센트 | cafe-gold | 할인율 강조 |
| 메뉴 가격 | cafe-brown | 가격 표시 |
| 카테고리 활성 | cafe-dark | 선택된 필터 |

---

## 구현 우선순위

### Phase 1: 쿠폰 정상화 (즉시)
1. `perspective-1000` Tailwind 설정 추가 또는
2. SimpleCoupon으로 교체 (플립 효과 제거)

### Phase 2: 히어로 추가
1. CafeHero 컴포넌트 생성
2. 실제 카페 사진 적용 (없으면 placeholder)

### Phase 3: 메뉴 UI 개선
1. SignatureMenu 추가
2. MenuGrid로 전환 (Swiper 제거)

### Phase 4: 정보 정리
1. CafeInfo Accordion 적용
2. 불필요한 정보 제거/축소

---

## 예상 결과

### Before (현재)
- 쿠폰 미노출
- 메뉴 이미지 없음
- 일반적인 정보 나열
- 브랜딩 요소 부재

### After (개선)
- 쿠폰 명확히 표시
- 시그니처 메뉴 부각
- 카페 분위기 전달
- 브랜드 일관성 확보

---

## 파일 구조

```
components/guest/cafe/
├── index.ts                 # barrel export
├── CafePageContent.tsx      # 메인 컨테이너
├── CafeHero.tsx             # 히어로 섹션
├── SimpleCoupon.tsx         # 간소화된 쿠폰
├── SignatureMenu.tsx        # 시그니처 메뉴
├── MenuGrid.tsx             # 메뉴 그리드
└── CafeInfo.tsx             # 접이식 카페 정보
```

---

## 참고: 쿠폰 CSS 수정 (임시 해결책)

현재 `perspective-1000` 클래스가 동작하지 않는 문제:

```css
/* globals.css에 추가 */
.perspective-1000 {
  perspective: 1000px;
}
```

또는 Tailwind 설정:

```js
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      // ...
    },
  },
  plugins: [
    function({ addUtilities }) {
      addUtilities({
        '.perspective-1000': {
          perspective: '1000px',
        },
      })
    },
  ],
}
```
