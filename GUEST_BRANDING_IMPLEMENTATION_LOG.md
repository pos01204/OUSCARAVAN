# 고객 브랜딩(실사진/영상) 반영 + 쿠폰 플립 오버플로우 수정 작업 로그

> **기간**: 2026-01-19  
> **목표**: 브랜딩 슬롯 구조 마련 + 쿠폰 플립 뒷면 오버플로우/리사이즈 최적화

---

## 1) 작업 내역(변경 사항)

### 1.1 브랜딩 에셋 슬롯 추가
- `lib/brand.ts`
  - 고객 페이지에서 사용할 브랜딩 미디어(이미지/영상) 경로를 **한 곳에서 관리**하도록 추가
  - 기본값은 `null`로 두어 **에셋이 없어도 기존 UI가 유지**되게 함

### 1.2 브랜딩 미디어 레이어 공통 컴포넌트 추가
- `components/guest/BrandMediaLayer.tsx`
  - `imageSrc` 또는 `videoSrc`를 받아 **absolute inset-0 레이어**로 깔 수 있는 컴포넌트
  - `object-fit(cover/contain)` 규칙 제공
  - 오버레이(그라데이션) 레이어 기본 제공 → 텍스트 가독성 유지

### 1.3 쿠폰 플립 오버플로우 방지(클리핑 강제) + 뒷면 이미지 슬롯 적용
- `components/features/CouponFlip.tsx`
  - 회전 컨테이너를 `rounded-2xl overflow-hidden`으로 감싸 **회전/이미지/패턴이 카드 외곽으로 새는 현상 방지**
  - 뒷면에 `BrandMediaLayer`를 붙여 **브랜딩 이미지가 들어오더라도 카드 영역을 넘지 않도록 강제**
  - `CardContent`에도 `overflow-hidden` 적용(이중 안전장치)

### 1.4 주문 페이지 쿠폰 플립에 브랜딩 슬롯 연결
- `components/guest/GuestOrderContent.tsx`
  - `CouponFlip`에 `backImageSrc={GUEST_BRAND_MEDIA.couponBackImageSrc}` 전달

### 1.5 홈 Hero에 브랜딩 슬롯 연결
- `components/guest/GuestHomeContent.tsx`
  - Hero 섹션에 `BrandMediaLayer` 추가(에셋 없으면 렌더 X)

---

## 2) 자체 진단(평가/리스크)

### 2.1 잘 된 점
- **오버플로우 원인을 구조적으로 차단**: 회전 컨테이너 자체를 클리핑하여 “에셋 교체”가 들어와도 동일 문제가 재발할 확률을 낮춤
- **브랜딩 반영의 비용을 낮춤**: 이후 실사진/영상을 넣을 때 “페이지별 레이아웃 수정”이 아니라 `lib/brand.ts`만 채워도 적용 가능

### 2.2 남은 리스크/보완 포인트
- 영상 브랜딩은 인앱/저사양에서 자동재생 정책에 의해 재생 실패할 수 있음
  - 현재 설계는 실패해도 UI가 깨지지 않도록 구성했지만, **추가 폴백(정지 프레임 이미지)**를 넣으면 안정성이 더 올라감
- 실제 에셋 투입 후 “텍스트 가독성/명암”이 부족할 수 있음
  - 오버레이 강도를 페이지별로 미세 조정할 수 있도록 토큰화하는 것을 권장

---

## 3) 다음 단계(추천)
- `public/brand/*` 경로에 실제 이미지/영상 에셋을 넣고 `lib/brand.ts` 값을 채워 **실환경에서 가독성/성능 점검**
- 쿠폰 뒷면은 “브랜드 이미지 + 가독성 오버레이 + 핵심 텍스트” 조합으로 고정하고,
  **이미지 비율(세로/가로)별로 cover/contain 정책을 확정**(브랜드 가이드로 문서화)

