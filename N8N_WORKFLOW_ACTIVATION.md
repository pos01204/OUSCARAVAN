# n8n 워크플로우 활성화 가이드

## 🔍 워크플로우 활성화 방법

**n8n 워크플로우를 활성화하면:**
- Gmail Trigger가 자동으로 이메일을 감지
- 새로운 예약 이메일이 오면 자동으로 처리
- Railway API로 예약 데이터 전송

**n8n 최신 버전에서는:**
- **"Publish" 버튼**이 워크플로우 활성화 버튼
- "Active" 토글은 이전 버전에서만 사용
- 무료 플랜(trial 포함)에서도 활성화 가능

---

## ✅ 워크플로우 활성화 단계

### 1단계: 워크플로우 저장

1. **n8n 워크플로우 편집기**에서 작업 완료
2. 워크플로우가 자동으로 저장됨 ("Saved" 표시)
3. 또는 **"Save" 버튼** 클릭

---

### 2단계: 워크플로우 활성화 (Publish)

**방법 1: Publish 버튼 사용 (권장)**

1. **n8n 워크플로우 편집기** 상단 확인
2. **우측 상단의 "Publish" 버튼** 클릭
3. 워크플로우가 활성화됨
4. "Publish" 버튼이 "Unpublish"로 변경되거나 "Published" 상태 표시

**방법 2: 워크플로우 목록에서 활성화**

1. **n8n 대시보드** → **"Workflows"** 메뉴 클릭
2. 워크플로우 목록에서 **"네이버 예약 → 카카오톡 발송"** 찾기
3. 워크플로우 카드에서 **"Publish" 버튼** 또는 **토글** 클릭
4. 워크플로우가 활성화됨

---

### 3단계: 활성화 확인

**활성화된 워크플로우 표시:**
- 워크플로우 편집기 상단에 **"Published" 상태** 표시
- 또는 **"Unpublish" 버튼** 표시
- 워크플로우 카드에 **"Active" 배지** 표시

**비활성화된 워크플로우 표시:**
- 워크플로우 편집기 상단에 **"Publish" 버튼** 표시
- 워크플로우 카드에 **"Inactive" 배지** 표시

---

## 🔧 워크플로우 동작 확인

### Gmail Trigger 동작:

**활성화된 워크플로우:**
- 설정한 **Poll Times** (예: "Every Minute")마다 Gmail 확인
- 새로운 예약 이메일이 오면 자동으로 처리
- 각 이메일을 하나씩 처리

**비활성화된 워크플로우:**
- Gmail 확인하지 않음
- 이메일이 와도 처리하지 않음

---

### 실행 로그 확인:

**n8n 대시보드 → 워크플로우 → "Executions" 탭:**

1. **"Executions" 탭** 클릭
2. 워크플로우 실행 기록 확인
3. 각 실행의 상태 확인:
   - ✅ **Success**: 성공
   - ❌ **Error**: 실패
   - ⏸️ **Running**: 실행 중

---

## 📋 체크리스트

### 워크플로우 활성화:

- [ ] 워크플로우 저장 완료 ("Saved" 표시)
- [ ] "Publish" 버튼 클릭
- [ ] "Published" 상태 확인
- [ ] 워크플로우 카드에 "Active" 배지 표시

### Gmail Trigger 설정:

- [ ] Gmail 인증 완료
- [ ] Poll Times 설정 (예: "Every Minute")
- [ ] 필터 설정 확인 (subject, sender)

### 테스트:

- [ ] 새로운 예약 이메일로 테스트
- [ ] Executions 탭에서 실행 기록 확인
- [ ] Railway 로그에서 예약 생성 확인

---

## 🚀 워크플로우 활성화 후 동작

**자동 처리 흐름:**

1. **Gmail Trigger** (1분마다 확인)
   - 새로운 예약 이메일 감지
   - 이메일 데이터 전달

2. **Code 노드** (이메일 파싱)
   - 예약 정보 추출
   - 데이터 정리

3. **HTTP Request 노드** (Railway API 호출)
   - 예약 데이터 전송
   - Railway API 응답 확인

4. **결과:**
   - Railway 데이터베이스에 예약 저장
   - 관리자 페이지에서 예약 확인 가능

---

## 🔍 문제 해결

### 문제 1: 워크플로우가 활성화되지 않음

**증상:**
- "Publish" 버튼을 클릭해도 활성화되지 않음
- 워크플로우가 실행되지 않음

**해결:**
1. 워크플로우 저장 확인 ("Saved" 표시)
2. 모든 노드가 올바르게 설정되었는지 확인
3. 에러가 있는 노드가 없는지 확인
4. "Publish" 버튼 다시 클릭
5. 브라우저 새로고침 후 다시 시도

---

### 문제 2: Gmail Trigger가 이메일을 감지하지 않음

**증상:**
- 워크플로우는 활성화되어 있지만 실행되지 않음

**해결:**
1. Gmail 인증 확인
2. 필터 설정 확인 (subject, sender)
3. Poll Times 확인
4. Executions 탭에서 에러 확인

---

### 문제 3: 워크플로우가 자주 실행됨

**증상:**
- 같은 이메일이 여러 번 처리됨

**해결:**
1. Gmail Trigger는 이미 처리한 이메일을 다시 처리하지 않음
2. 중복 실행이 발생하면 Gmail 필터 확인
3. 또는 Poll Times 간격 조정

---

**문서 버전**: 1.0  
**최종 업데이트**: 2026-01-06
