# n8n SolAPI ì›Œí¬í”Œë¡œìš° ì„¤ì • ê°€ì´ë“œ

## ðŸ“‹ ê°œìš”

**SolAPI** n8n ë…¸ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ì„ ìžë™ìœ¼ë¡œ ë°œì†¡í•˜ëŠ” ì›Œí¬í”Œë¡œìš° ì„¤ì • ê°€ì´ë“œìž…ë‹ˆë‹¤.

**ìž¥ì :**
- âœ… n8n ê³µì‹ ë…¸ë“œ ì§€ì›
- âœ… ì„¤ì • ê°„íŽ¸
- âœ… Credential ê´€ë¦¬ ìš©ì´
- âœ… ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡, ë„¤ì´ë²„ ë©”ì‹œì§€, SMS í†µí•©

---

## í˜„ìž¬ ì›Œí¬í”Œë¡œìš° êµ¬ì¡°

```
Gmail Trigger
  â†“
IF (ì˜ˆì•½ í™•ì •/ì·¨ì†Œ êµ¬ë¶„)
  â†“
Code (ì´ë©”ì¼ íŒŒì‹±)
  â†“
Set (ë°ì´í„° ì •ë¦¬)
  â†“
Code (ê³ ìœ  ë§í¬ ìƒì„±)
  â†“
Code (ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜) â† ì¶”ê°€
  â†“
Code (í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„±) â† ì¶”ê°€
  â†“
SolAPI (ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ë°œì†¡) â† SolAPI ë…¸ë“œ ì‚¬ìš©
```

---

## 1ë‹¨ê³„: SolAPI ë…¸ë“œ ì„¤ì¹˜ í™•ì¸

### 1-1. SolAPI ë…¸ë“œ í™•ì¸

1. n8n ì›Œí¬í”Œë¡œìš° íŽ¸ì§‘ í™”ë©´
2. **"+" ë²„íŠ¼** í´ë¦­
3. ê²€ìƒ‰ì°½ì— **"SolAPI"** ìž…ë ¥
4. **"SolAPI"** ë…¸ë“œê°€ ìžˆëŠ”ì§€ í™•ì¸

### 1-2. ë…¸ë“œê°€ ì—†ëŠ” ê²½ìš°

**Community Nodesì—ì„œ ì„¤ì¹˜:**

1. n8n ìƒë‹¨ ë©”ë‰´ â†’ **Settings** â†’ **Community Nodes**
2. **"SolAPI"** ê²€ìƒ‰
3. **"Install"** í´ë¦­
4. ì„¤ì¹˜ ì™„ë£Œ í›„ ì›Œí¬í”Œë¡œìš° ìƒˆë¡œê³ ì¹¨

---

## 2ë‹¨ê³„: SolAPI Credential ì„¤ì •

### 2-1. Credential ìƒì„±

1. n8n ì›Œí¬í”Œë¡œìš°ì—ì„œ **SolAPI ë…¸ë“œ** ì¶”ê°€
2. **"Credential"** ë“œë¡­ë‹¤ìš´ì—ì„œ **"Create New Credential"** ì„ íƒ
3. **Credential Name**: `SolAPI OUSCARAVAN`

### 2-2. API ì¸ì¦ ì •ë³´ ìž…ë ¥

**í•„ìˆ˜ í•„ë“œ:**

| í•„ë“œ | ê°’ | ì„¤ëª… |
|------|-----|------|
| `API Key` | SolAPI API Key | SolAPI ì½˜ì†”ì—ì„œ ë°œê¸‰ë°›ì€ API Key |
| `API Secret` | SolAPI API Secret | SolAPI ì½˜ì†”ì—ì„œ ë°œê¸‰ë°›ì€ API Secret |

**Save** í´ë¦­

### 2-3. Credential í…ŒìŠ¤íŠ¸

1. **"Test"** ë²„íŠ¼ í´ë¦­ (ìžˆëŠ” ê²½ìš°)
2. ì¸ì¦ ì„±ê³µ í™•ì¸

---

## 3ë‹¨ê³„: ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜ ë…¸ë“œ ì¶”ê°€

### 3-1. Code ë…¸ë“œ ì¶”ê°€

**"ê³ ìœ  ë§í¬ ìƒì„±"** ë…¸ë“œì™€ **"SolAPI"** ë…¸ë“œ ì‚¬ì´ì— ì¶”ê°€:

**ë…¸ë“œ ì´ë¦„**: `ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜`

**Mode**: `Run Once for All Items`

**Language**: `JavaScript`

**Code**:
```javascript
// ì „í™”ë²ˆí˜¸ì—ì„œ í•˜ì´í”ˆ ì œê±° ë° í¬ë§· ì •ë¦¬
let phone = $input.item.json.phone || '';

// í•˜ì´í”ˆ, ê³µë°±, ê´„í˜¸ ì œê±°
phone = phone.replace(/[-\s()]/g, '');

// êµ­ì œë²ˆí˜¸ ì œê±° (010ìœ¼ë¡œ ì‹œìž‘í•˜ëŠ” ê²½ìš°)
if (phone.startsWith('010')) {
  phone = phone.substring(0, 11); // 01012345678 í˜•ì‹
} else if (phone.startsWith('82')) {
  // 82ë¡œ ì‹œìž‘í•˜ëŠ” ê²½ìš° (êµ­ì œë²ˆí˜¸)
  phone = '0' + phone.substring(2);
  if (phone.length > 11) {
    phone = phone.substring(0, 11);
  }
}

// ì „í™”ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
if (!phone || phone.length < 10) {
  throw new Error(`ìœ íš¨í•˜ì§€ ì•Šì€ ì „í™”ë²ˆí˜¸: ${phone}`);
}

return {
  ...$input.item.json,
  phone: phone,
  phone_formatted: phone
};
```

**Save** í´ë¦­

---

## 4ë‹¨ê³„: í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„± ë…¸ë“œ ì¶”ê°€ (ì„ íƒì‚¬í•­)

### 4-1. Code ë…¸ë“œ ì¶”ê°€

**"ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜"** ë…¸ë“œì™€ **"SolAPI"** ë…¸ë“œ ì‚¬ì´ì— ì¶”ê°€:

**ë…¸ë“œ ì´ë¦„**: `í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„±`

**Mode**: `Run Once for All Items`

**Language**: `JavaScript`

**Code**:
```javascript
// SolAPI í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„±
const variables = {
  "#{guest_name}": $input.item.json.guest || '',
  "#{reservation_number}": $input.item.json.reservationNumber || '',
  "#{checkin_date}": $input.item.json.checkin || '',
  "#{checkout_date}": $input.item.json.checkout || '',
  "#{room_type}": $input.item.json.room || '',
  "#{amount}": $input.item.json.amount || '',
  "#{service_link}": $input.item.json.link || ''
};

return {
  ...$input.item.json,
  solapi_variables: variables
};
```

**Save** í´ë¦­

---

## 5ë‹¨ê³„: SolAPI ë…¸ë“œ ì„¤ì •

### 5-1. ê¸°ë³¸ ì„¤ì •

**Credential**: `SolAPI OUSCARAVAN` (ì´ì „ì— ìƒì„±í•œ Credential ì„ íƒ)

**Operation**: `Send AlimTalk` (ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ë°œì†¡)

### 5-2. í•„ìˆ˜ í•„ë“œ ìž…ë ¥

**Option A: ì§ì ‘ ìž…ë ¥ (ê°„ë‹¨)**

| í•„ë“œ | ê°’ | ì„¤ëª… |
|------|-----|------|
| `to` | `{{ $json.phone }}` | ìˆ˜ì‹ ìž ì „í™”ë²ˆí˜¸ |
| `templateId` | `{{ $env.SOLAPI_ALIMTALK_TEMPLATE_ID }}` | í…œí”Œë¦¿ ID |
| `variables` | ì•„ëž˜ JSON ì°¸ì¡° | í…œí”Œë¦¿ ë³€ìˆ˜ |

**Variables (JSON í˜•ì‹):**
```json
{
  "#{guest_name}": "{{ $json.guest }}",
  "#{reservation_number}": "{{ $json.reservationNumber }}",
  "#{checkin_date}": "{{ $json.checkin }}",
  "#{checkout_date}": "{{ $json.checkout }}",
  "#{room_type}": "{{ $json.room }}",
  "#{amount}": "{{ $json.amount }}",
  "#{service_link}": "{{ $json.link }}"
}
```

**Option B: Code ë…¸ë“œì—ì„œ ë³€ìˆ˜ ìƒì„± í›„ ì‚¬ìš© (ê¶Œìž¥)**

í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„± ë…¸ë“œë¥¼ ì‚¬ìš©í•œ ê²½ìš°:

| í•„ë“œ | ê°’ | ì„¤ëª… |
|------|-----|------|
| `to` | `{{ $json.phone }}` | ìˆ˜ì‹ ìž ì „í™”ë²ˆí˜¸ |
| `templateId` | `{{ $env.SOLAPI_ALIMTALK_TEMPLATE_ID }}` | í…œí”Œë¦¿ ID |
| `variables` | `{{ $json.solapi_variables }}` | í…œí”Œë¦¿ ë³€ìˆ˜ (Code ë…¸ë“œì—ì„œ ìƒì„±) |

### 5-3. ì¶”ê°€ ì˜µì…˜ (ì„ íƒì‚¬í•­)

**ì˜ˆì•½ ë°œì†¡:**
- `reserveTime`: ì˜ˆì•½ ë°œì†¡ ì‹œê°„ (ISO 8601 í˜•ì‹)
- ì˜ˆ: `2026-01-15T09:00:00+09:00`

**ìŠ¤ì¼€ì¤„:**
- `scheduleCode`: ìŠ¤ì¼€ì¤„ ì½”ë“œ (ì„ íƒì‚¬í•­)

**Save** í´ë¦­

---

## 6ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### 6-1. n8n í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

1. n8n ìƒë‹¨ ë©”ë‰´ â†’ **Settings** (âš™ï¸ ì•„ì´ì½˜)
2. **Environment Variables** í´ë¦­
3. ë‹¤ìŒ ë³€ìˆ˜ ì¶”ê°€:

| Name | Value | ì„¤ëª… |
|------|-------|------|
| `SOLAPI_ALIMTALK_TEMPLATE_ID` | í…œí”Œë¦¿ ID | SolAPIì—ì„œ ìŠ¹ì¸ë°›ì€ í…œí”Œë¦¿ ID |
| `WEB_APP_URL` | ì›¹ ì•± URL | ê¸°ì¡´ ìœ ì§€ |

**ì°¸ê³ :** SolAPI API Keyì™€ Secretì€ Credentialë¡œ ê´€ë¦¬í•˜ë¯€ë¡œ í™˜ê²½ ë³€ìˆ˜ì— ì¶”ê°€í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

---

## 7ë‹¨ê³„: SolAPI í…œí”Œë¦¿ ID í™•ì¸

### 7-1. í…œí”Œë¦¿ ID í™•ì¸ ë°©ë²•

1. SolAPI ì½˜ì†” ë¡œê·¸ì¸
2. **"ì•Œë¦¼í†¡"** â†’ **"í…œí”Œë¦¿ ê´€ë¦¬"** í´ë¦­
3. ìŠ¹ì¸ëœ í…œí”Œë¦¿ í´ë¦­
4. **"í…œí”Œë¦¿ ID"** ë˜ëŠ” **"Template ID"** ë³µì‚¬
5. n8n í™˜ê²½ ë³€ìˆ˜ì— ìž…ë ¥

---

## 8ë‹¨ê³„: í…ŒìŠ¤íŠ¸

### 8-1. ë‹¨ì¼ ë…¸ë“œ í…ŒìŠ¤íŠ¸

1. **"ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜"** ë…¸ë“œì—ì„œ **"Execute Node"** í´ë¦­
2. ì „í™”ë²ˆí˜¸ í¬ë§· í™•ì¸
3. **"í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„±"** ë…¸ë“œì—ì„œ **"Execute Node"** í´ë¦­
4. ë³€ìˆ˜ ìƒì„± í™•ì¸
5. **"SolAPI"** ë…¸ë“œì—ì„œ **"Execute Node"** í´ë¦­
6. SolAPI ì‘ë‹µ í™•ì¸

### 8-2. ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸

1. í…ŒìŠ¤íŠ¸ìš© ë„¤ì´ë²„ ì˜ˆì•½ ì™„ë£Œ ì´ë©”ì¼ ë°œì†¡
2. n8n ì›Œí¬í”Œë¡œìš° ìžë™ ì‹¤í–‰ í™•ì¸
3. ê° ë…¸ë“œ ì‹¤í–‰ ê²°ê³¼ í™•ì¸
4. ì•Œë¦¼í†¡ ìˆ˜ì‹  í™•ì¸

---

## ðŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### SolAPI ì„¤ì •
- [ ] SolAPI ê°€ìž… ì™„ë£Œ
- [ ] API Key ë° Secret ë°œê¸‰
- [ ] ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ì„œë¹„ìŠ¤ í™œì„±í™”
- [ ] í…œí”Œë¦¿ ë“±ë¡ ë° ìŠ¹ì¸ ì™„ë£Œ
- [ ] í…œí”Œë¦¿ ID í™•ì¸

### n8n ì„¤ì •
- [ ] SolAPI ë…¸ë“œ ì„¤ì¹˜ í™•ì¸
- [ ] SolAPI Credential ìƒì„±
- [ ] ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜ ë…¸ë“œ ì¶”ê°€
- [ ] í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„± ë…¸ë“œ ì¶”ê°€ (ì„ íƒ)
- [ ] SolAPI ë…¸ë“œ ì„¤ì •
- [ ] í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ (í…œí”Œë¦¿ ID)

### í…ŒìŠ¤íŠ¸
- [ ] ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜ í…ŒìŠ¤íŠ¸
- [ ] í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„± í…ŒìŠ¤íŠ¸
- [ ] SolAPI ë°œì†¡ í…ŒìŠ¤íŠ¸
- [ ] ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸

---

## ðŸ†˜ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: SolAPI ë…¸ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**ì›ì¸:** n8nì— SolAPI ë…¸ë“œê°€ ì„¤ì¹˜ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
1. n8n ë²„ì „ í™•ì¸ (ìµœì‹  ë²„ì „ ê¶Œìž¥)
2. Community Nodesì—ì„œ SolAPI ê²€ìƒ‰
3. ì„¤ì¹˜ í›„ ì›Œí¬í”Œë¡œìš° ìƒˆë¡œê³ ì¹¨
4. ë˜ëŠ” n8n ê´€ë¦¬ìžì—ê²Œ ë¬¸ì˜

### ë¬¸ì œ 2: "Credential ì˜¤ë¥˜" ë˜ëŠ” "401 Unauthorized"

**ì›ì¸:** API Key ë˜ëŠ” Secret ì˜¤ë¥˜

**í•´ê²°:**
1. SolAPI Credential ì„¤ì • í™•ì¸
2. API Key ë° Secret ìž¬í™•ì¸
3. SolAPI ì½˜ì†”ì—ì„œ API Key ìƒíƒœ í™•ì¸
4. Credential ìž¬ìƒì„±

### ë¬¸ì œ 3: "í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ" ì˜¤ë¥˜

**ì›ì¸:** í…œí”Œë¦¿ ID ì˜¤ë¥˜ ë˜ëŠ” í…œí”Œë¦¿ ë¯¸ìŠ¹ì¸

**í•´ê²°:**
1. í…œí”Œë¦¿ ID í™•ì¸ (í™˜ê²½ ë³€ìˆ˜)
2. í…œí”Œë¦¿ ìŠ¹ì¸ ìƒíƒœ í™•ì¸
3. ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ì—ì„œ í…œí”Œë¦¿ ìŠ¹ì¸ ì™„ë£Œ í™•ì¸
4. SolAPI ì½˜ì†”ì—ì„œ í…œí”Œë¦¿ ìƒíƒœ í™•ì¸

### ë¬¸ì œ 4: "ì „í™”ë²ˆí˜¸ í˜•ì‹ ì˜¤ë¥˜"

**ì›ì¸:** ì „í™”ë²ˆí˜¸ í¬ë§· ì˜¤ë¥˜

**í•´ê²°:**
1. ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜ ë…¸ë“œ í™•ì¸
2. í•˜ì´í”ˆ ì œê±° í™•ì¸
3. ì „í™”ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬ í™•ì¸
4. SolAPI ìš”êµ¬ í˜•ì‹ í™•ì¸

### ë¬¸ì œ 5: "í…œí”Œë¦¿ ë³€ìˆ˜ ì˜¤ë¥˜"

**ì›ì¸:** ë³€ìˆ˜ëª… ë¶ˆì¼ì¹˜ ë˜ëŠ” í˜•ì‹ ì˜¤ë¥˜

**í•´ê²°:**
1. í…œí”Œë¦¿ ë³€ìˆ˜ëª… ì •í™•ížˆ ì¼ì¹˜ í™•ì¸
2. ë³€ìˆ˜ í˜•ì‹ í™•ì¸ (JSON ê°ì²´)
3. Code ë…¸ë“œì—ì„œ ë³€ìˆ˜ ìƒì„± í™•ì¸
4. SolAPI ë…¸ë“œì—ì„œ ë³€ìˆ˜ ë§¤í•‘ í™•ì¸

---

## ðŸ’¡ SolAPI ì¶”ê°€ ê¸°ëŠ¥ í™œìš©

### ë„¤ì´ë²„ ë©”ì‹œì§€ ë°œì†¡

**Operation**: `Send NaverTalk` ì„ íƒ

ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë„¤ì´ë²„ ë©”ì‹œì§€ë„ ë°œì†¡ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### SMS ë°œì†¡

**Operation**: `Send SMS` ì„ íƒ

ì¼ë°˜ SMSë„ ë°œì†¡ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ë°œì†¡ ê²°ê³¼ í™•ì¸

SolAPI ë…¸ë“œëŠ” ë°œì†¡ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤:
- `messageId`: ë©”ì‹œì§€ ID
- `status`: ë°œì†¡ ìƒíƒœ
- `error`: ì˜¤ë¥˜ ì •ë³´ (ìžˆëŠ” ê²½ìš°)

---

## ðŸŽ¯ ìµœì¢… ì›Œí¬í”Œë¡œìš° ì˜ˆì‹œ

### ì™„ì „í•œ ì›Œí¬í”Œë¡œìš° êµ¬ì¡°

```
[Gmail Trigger]
  â†“
[IF: ì˜ˆì•½ í™•ì •/ì·¨ì†Œ êµ¬ë¶„]
  â”œâ”€ True (í™•ì •)
  â”‚   â†“
  â”‚   [Code: í™•ì • ì´ë©”ì¼ íŒŒì‹±]
  â”‚   â†“
  â”‚   [Set: ë°ì´í„° ì •ë¦¬]
  â”‚   â†“
  â”‚   [Code: ê³ ìœ  ë§í¬ ìƒì„±]
  â”‚   â†“
  â”‚   [Code: ì „í™”ë²ˆí˜¸ í¬ë§· ë³€í™˜]
  â”‚   â†“
  â”‚   [Code: í…œí”Œë¦¿ ë³€ìˆ˜ ìƒì„±]
  â”‚   â†“
  â”‚   [SolAPI: ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ë°œì†¡]
  â”‚
  â””â”€ False (ì·¨ì†Œ)
      â†“
      [Code: ì·¨ì†Œ ì´ë©”ì¼ íŒŒì‹±]
      â†“
      [Set: ì·¨ì†Œ ë°ì´í„° ì •ë¦¬]
      â†“
      [ê´€ë¦¬ìž ì•Œë¦¼] (ì„ íƒì‚¬í•­)
```

---

## ðŸ“Š SolAPI ë…¸ë“œ ì„¤ì • ì˜ˆì‹œ

### ì„¤ì • ìŠ¤í¬ë¦°ìƒ· ì„¤ëª…

**SolAPI ë…¸ë“œ ì„¤ì • í™”ë©´:**

1. **Credential**: `SolAPI OUSCARAVAN` ì„ íƒ
2. **Operation**: `Send AlimTalk` ì„ íƒ
3. **to**: `{{ $json.phone }}`
4. **templateId**: `{{ $env.SOLAPI_ALIMTALK_TEMPLATE_ID }}`
5. **variables**: 
   ```json
   {
     "#{guest_name}": "{{ $json.guest }}",
     "#{reservation_number}": "{{ $json.reservationNumber }}",
     "#{checkin_date}": "{{ $json.checkin }}",
     "#{checkout_date}": "{{ $json.checkout }}",
     "#{room_type}": "{{ $json.room }}",
     "#{amount}": "{{ $json.amount }}",
     "#{service_link}": "{{ $json.link }}"
   }
   ```

---

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-01-15
