# Phase 1 μ‘μ—… μ§„ν–‰ μƒν™©

## β… μ™„λ£λ μ‘μ—…

### 1. ν•λ‹¨ λ„¤λΉ„κ²μ΄μ… μ¬κµ¬μ„±
**νμΌ**: `components/admin/AdminBottomNav.tsx`
**μƒνƒ**: β… μ™„λ£
**λ³€κ²½ μ‚¬ν•­**:
- Tab 1: "λ€μ‹λ³΄λ“" β†’ "ν™" (Home μ•„μ΄μ½)
- Tab 2: "μμ•½" β†’ "μμ•½/λ°°μ •" (Calendar μ•„μ΄μ½)
- Tab 3: "λ°©" β†’ "ν„μ¥κ΄€λ¦¬" (LayoutDashboard μ•„μ΄μ½)
- Tab 4: "μ£Όλ¬Έ" β†’ "μ£Όλ¬Ένμ¤ν† λ¦¬" (ShoppingCart μ•„μ΄μ½)

### 2. Tab 1: ν™ - μƒλ‹¨ λ°°λ„ κµ¬ν„ (λ”¥ λ§ν¬ ν¬ν•¨)
**νμΌ**: 
- `components/admin/CriticalStatusBanner.tsx` (μ‹ κ· μƒμ„±)
- `app/admin/page.tsx` (μμ •)

**μƒνƒ**: β… μ™„λ£

**κµ¬ν„ λ‚΄μ©**:
1. **CriticalStatusBanner μ»΄ν¬λ„νΈ μƒμ„±**
   - D-1 λ―Έλ°°μ • μμ•½ κ±΄μ ν‘μ‹
   - κ²½κ³  μƒ‰μƒ λ°°κ²½ (orange-50)
   - ν΄λ¦­ μ‹ λ”¥ λ§ν¬λ΅ μ΄λ™

2. **λ”¥ λ§ν¬ κµ¬ν„**
   - λ°°λ„ ν΄λ¦­ μ‹ `/admin/reservations?view=list&filter=d1-unassigned`λ΅ μ΄λ™
   - μμ•½ κ΄€λ¦¬ νμ΄μ§€μ—μ„ `searchParams` κ°μ§€
   - `filter=d1-unassigned`μΈ κ²½μ° μλ™μΌλ΅:
     - λ‚΄μΌ λ‚ μ§ κ³„μ‚° λ° `checkin` ν•„ν„° μ μ©
     - λ¦¬μ¤νΈ λ·°λ΅ μλ™ μ „ν™
     - λ―Έλ°°μ • μμ•½λ§ ν•„ν„°λ§

3. **λ€μ‹λ³΄λ“ νμ΄μ§€ ν†µν•©**
   - κΈ°μ΅΄ ν†µκ³„ μΉ΄λ“ μ κ±°
   - CriticalStatusBanner μ¶”κ°€
   - νμ΄μ§€ μ λ© λ³€κ²½: "λ€μ‹λ³΄λ“" β†’ "ν™"
   - μ„¤λ… λ³€κ²½: "μ‹¤μ‹κ°„ μ—…λ¬΄ μ•λ¦Ό λ° κΈ΄κΈ‰ ν¬λ‘ λ¦¬μ¤νΈ"

**μμ •λ νμΌ**:
- `app/admin/reservations/page.tsx`: searchParams κ°μ§€ λ΅μ§ μ¶”κ°€
- `app/admin/reservations/ReservationsViewClient.tsx`: λ”¥ λ§ν¬ ν•„ν„°λ§ λ΅μ§ μ¶”κ°€

---

## π”„ μ§„ν–‰ μ¤‘μΈ μ‘μ—…

μ—†μ

---

### 3. Tab 1: ν™ - μ‹¤μ‹κ°„ ν”Όλ“ κµ¬ν„
**νμΌ**: 
- `components/admin/NotificationFeed.tsx` (μ‹ κ· μƒμ„±)
- `app/admin/page.tsx` (μμ •)

**μƒνƒ**: β… μ™„λ£

**κµ¬ν„ λ‚΄μ©**:
1. **NotificationFeed μ»΄ν¬λ„νΈ μƒμ„±**
   - μ•λ¦Ό νƒ€μ…λ³„ μ•„μ΄μ½ λ° μƒ‰μƒ κµ¬λ¶„
   - μµμ‹  μ•λ¦Όμ„ μƒλ‹¨μ— ν‘μ‹ (μ‹κ°„μ μ •λ ¬)
   - μ½μ§€ μ•μ€ μ•λ¦Ό λ°°μ§€ ν‘μ‹
   - μ•λ¦Ό μ‚­μ  κΈ°λ¥

2. **μ•λ¦Ό νƒ€μ…λ³„ μΉ΄λ“ λ””μμΈ**
   - `order_created`: νλ€μƒ‰ (ShoppingCart μ•„μ΄μ½)
   - `checkin`: μ΄λ΅μƒ‰ (CheckCircle μ•„μ΄μ½)
   - `checkout`: λ³΄λΌμƒ‰ (CheckCircle μ•„μ΄μ½)
   - `reservation_assigned`: μ£Όν™©μƒ‰ (Calendar μ•„μ΄μ½)

3. **SSE μ—°λ™**
   - `useNotificationStream` ν›… μ‚¬μ©
   - μ‹¤μ‹κ°„ μ•λ¦Ό μμ‹  λ° μλ™ μ¶”κ°€

4. **ν΄λ¦­ ν•Έλ“¤λ¬**
   - μ•λ¦Ό ν΄λ¦­ μ‹ μ½μ μ²λ¦¬
   - linkTypeκ³Ό linkIdμ— λ”°λΌ μ μ ν• νμ΄μ§€λ΅ μ΄λ™
   - metadataμ—μ„ reservationId, orderId μ¶”μ¶ν•μ—¬ μ΄λ™

5. **λ€μ‹λ³΄λ“ νμ΄μ§€ ν†µν•©**
   - NotificationFeed μ»΄ν¬λ„νΈ μ¶”κ°€
   - κΈ°μ΅΄ ν†µκ³„ μΉ΄λ“ λ° μµκ·Ό μμ•½ λ©λ΅ μ κ±°

---

### 4. Tab 2: D-1 λ―Έλ°°μ • ν•„ν„°λ§ (searchParams κ°μ§€)
**νμΌ**: 
- `app/admin/reservations/page.tsx` (μμ •)
- `app/admin/reservations/ReservationsViewClient.tsx` (μμ •)
- `app/admin/reservations/ReservationFiltersClient.tsx` (μμ •)

**μƒνƒ**: β… μ™„λ£

**κµ¬ν„ λ‚΄μ©**:
1. **μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ searchParams κ°μ§€**
   - `filter=d1-unassigned` νλΌλ―Έν„° κ°μ§€
   - λ‚΄μΌ λ‚ μ§ μλ™ κ³„μ‚° λ° `checkin` ν•„ν„° μ μ©
   - `view=list` νλΌλ―Έν„° μ²λ¦¬

2. **ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μλ™ ν•„ν„° μ μ©**
   - `ReservationsViewClient`μ—μ„ `filter` νλΌλ―Έν„° κ°μ§€
   - `filter=d1-unassigned`μΈ κ²½μ° λ―Έλ°°μ • μμ•½λ§ ν•„ν„°λ§
   - `view=list`μΈ κ²½μ° λ¦¬μ¤νΈ λ·°λ΅ μλ™ μ „ν™

3. **ν•„ν„° UI μ—°λ™**
   - `ReservationFiltersClient`μ— μ΄κΈ°κ°’ props μ¶”κ°€
   - μ„λ²„μ—μ„ κ³„μ‚°λ ν•„ν„° κ°’ μ „λ‹¬

---

### 5. Tab 2: λ°© λ°°μ • νΌ κ°•ν™” (μ—°λ½μ² ν•„μν™”, μ•λ¦Όν†΅ μ²΄ν¬λ°•μ¤)
**νμΌ**: `app/admin/reservations/[id]/page.tsx` (μμ •)

**μƒνƒ**: β… μ™„λ£

**κµ¬ν„ λ‚΄μ©**:
1. **μ—°λ½μ² ν•„μν™”**
   - μ „ν™”λ²νΈ μ…λ ¥ ν•„λ“μ— `required` μ†μ„± μ¶”κ°€
   - λΉ κ°’ κ²€μ¦ λ΅μ§ κ°•ν™”
   - μ—λ¬ λ©”μ‹μ§€ κ°μ„ 

2. **μ•λ¦Όν†΅ λ°μ†΅ μ²΄ν¬λ°•μ¤**
   - μ²΄ν¬λ°•μ¤ μ¶”κ°€ (κΈ°λ³Έ ν™μ„±ν™” μƒνƒ)
   - `sendNotification` μƒνƒ κ΄€λ¦¬
   - μ²΄ν¬λ°•μ¤κ°€ ν™μ„±ν™”λ κ²½μ°μ—λ§ n8n μ›Ήν›… νΈμ¶

3. **ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ ν¨μ„± κ²€μ‚¬ κ°•ν™”**
   - μ „ν™”λ²νΈ λΉ κ°’ κ²€μ¦
   - μ „ν™”λ²νΈ ν•μ‹ κ²€μ¦ (κΈ°μ΅΄ validatePhone ν•¨μ ν™μ©)
   - Toast λ©”μ‹μ§€ κ°μ„ 

### 6. SSE μλ™ μ¬μ—°κ²° λ΅μ§ κ°•ν™”
**νμΌ**: `lib/hooks/useNotificationStream.ts` (μμ •)

**μƒνƒ**: β… μ™„λ£

**κµ¬ν„ λ‚΄μ©**:
1. **μ§€μ λ°±μ¤ν”„ μ¬μ—°κ²° μ „λµ**
   - μ¬μ—°κ²° μ‹λ„ κ°„κ²©: 1μ΄, 2μ΄, 4μ΄, 8μ΄, 16μ΄
   - μµλ€ μ¬μ—°κ²° μ‹λ„ νμ: 5ν

2. **μ¬μ—°κ²° μΉ΄μ΄ν„° λ¦¬μ…‹**
   - μ—°κ²° μ„±κ³µ μ‹ μ¬μ—°κ²° μΉ΄μ΄ν„° λ¦¬μ…‹

3. **μ—λ¬ λ΅κΉ… κ°•ν™”**
   - μ¬μ—°κ²° μ‹λ„ νμ λ΅κΉ…
   - μµλ€ μ¬μ—°κ²° μ‹λ„ λ„λ‹¬ μ‹ μ—λ¬ λ΅κΉ…

---

## β… Phase 1 μ™„λ£

**μ™„λ£λ μ‘μ—…**:
1. β… ν•λ‹¨ λ„¤λΉ„κ²μ΄μ… μ¬κµ¬μ„±
2. β… Tab 1: μƒλ‹¨ λ°°λ„ κµ¬ν„ (λ”¥ λ§ν¬ ν¬ν•¨)
3. β… Tab 1: μ‹¤μ‹κ°„ ν”Όλ“ κµ¬ν„
4. β… Tab 2: D-1 λ―Έλ°°μ • ν•„ν„°λ§ (searchParams κ°μ§€)
5. β… Tab 2: λ°© λ°°μ • νΌ κ°•ν™” (μ—°λ½μ² ν•„μν™”, μ•λ¦Όν†΅ μ²΄ν¬λ°•μ¤)
6. β… SSE μλ™ μ¬μ—°κ²° λ΅μ§ κ°•ν™”

**λ‹¤μ λ‹¨κ³„**: Phase 2 μ‘μ—… μ‹μ‘

---

**μ—…λ°μ΄νΈ μΌμ‹**: 2026-01-XX
